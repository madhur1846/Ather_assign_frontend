{"ast":null,"code":"import { SIGNUP_SUCCESS, LOADING_UI, SET_ERRORS, SERVER_ERROR, CLEAR_ERRORS, LOADING_USER, SET_USER, SET_ERROR, SET_UNAUTHENTICATED, SET_ERRORS_SIGNUP_SELLER } from \"../types\";\nimport axios from \"axios\";\nexport const signupUser = (newUserData, history) => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  axios.post(\"/auth/signup-user\", newUserData).then(res => {\n    dispatch({\n      type: SIGNUP_SUCCESS\n    });\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n    history.push(\"/login\");\n  }).catch(err => {\n    console.log(err.response.data);\n\n    if (err.response) {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n    } else {\n      dispatch({\n        type: SERVER_ERROR\n      });\n    }\n  });\n};\nexport const loginAction = (userData, history) => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  axios.post(\"/auth/login\", userData).then(res => {\n    const jwt = `Bearer ${res.data.token}`;\n    localStorage.setItem(\"jwt\", jwt);\n    axios.defaults.headers.common[\"Authorization\"] = jwt;\n    dispatch(getUserData());\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n    console.log(\"Authenticated, check localStorage\", jwt);\n    history.push(\"/\");\n  }).catch(err => {\n    if (err.response) {\n      dispatch({\n        type: SET_ERROR,\n        payload: err.response.data\n      });\n    } else {\n      dispatch({\n        type: SERVER_ERROR\n      });\n    }\n  });\n};\nexport const getUserData = () => dispatch => {\n  dispatch({\n    type: LOADING_USER\n  });\n  axios.get(\"/user\").then(res => {\n    // console.log(res);\n    dispatch({\n      type: SET_USER,\n      payload: res.data.result\n    });\n  }).catch(err => console.log(err));\n};\nexport const signupSeller = (newSellerData, history) => async dispatch => {\n  console.log(newSellerData.get(\"aptName\"));\n  const location = `+${newSellerData.get(\"locality\")},+${newSellerData.get(\"street\")},+${newSellerData.get(\"zip\")}`;\n  console.log(location);\n\n  try {\n    const result = await axios.get(\"https://maps.googleapis.com/maps/api/geocode/json\", {\n      params: {\n        address: location,\n        key: \"AIzaSyAgIw9Puh-bUndTStw9wOUkEZvQHPbfQi8\"\n      }\n    });\n    console.log(\"Hello Result :\" + result.data.results);\n\n    if (Array.isArray(result.data.results) && result.data.results.length > 0) {\n      // console.log(\"Formattted Address : \" + result.data.results[0])\n      const formattedAddress = result.data.results[0].formatted_address;\n      const lat = result.data.results[0].geometry.location.lat;\n      const lng = result.data.results[0].geometry.location.lng;\n      newSellerData.append(\"lat\", lat);\n      newSellerData.append(\"lng\", lng);\n      newSellerData.append(\"formattedAddress\", formattedAddress);\n    }\n\n    dispatch(signupSellerFinal(newSellerData, history));\n  } catch (err) {\n    console.log(err);\n  }\n};\nexport const signupSellerFinal = (newSellerData, history) => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  axios.post(\"/auth/signup-seller\", newSellerData).then(res => {\n    dispatch({\n      type: SIGNUP_SUCCESS\n    });\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n    history.push(\"/login\");\n  }).catch(err => {\n    if (err.response) {\n      dispatch({\n        type: SET_ERRORS_SIGNUP_SELLER,\n        payload: err.response.data\n      });\n    } else {\n      dispatch({\n        type: SERVER_ERROR\n      });\n    }\n  });\n};\nexport const logoutAction = history => dispatch => {\n  localStorage.removeItem(\"jwt\");\n  delete axios.defaults.headers.common[\"Authorization\"];\n  dispatch({\n    type: SET_UNAUTHENTICATED\n  });\n  if (history) history.push(\"/login\");\n};","map":{"version":3,"sources":["/Users/madhurjoshi/Devlopment/Food-Devliery-App/foodHub-frontend-client/src/redux/actions/authActions.js"],"names":["SIGNUP_SUCCESS","LOADING_UI","SET_ERRORS","SERVER_ERROR","CLEAR_ERRORS","LOADING_USER","SET_USER","SET_ERROR","SET_UNAUTHENTICATED","SET_ERRORS_SIGNUP_SELLER","axios","signupUser","newUserData","history","dispatch","type","post","then","res","push","catch","err","console","log","response","data","payload","loginAction","userData","jwt","token","localStorage","setItem","defaults","headers","common","getUserData","get","result","signupSeller","newSellerData","location","params","address","key","results","Array","isArray","length","formattedAddress","formatted_address","lat","geometry","lng","append","signupSellerFinal","logoutAction","removeItem"],"mappings":"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","sourcesContent":["import {\n  SIGNUP_SUCCESS,\n  LOADING_UI,\n  SET_ERRORS,\n  SERVER_ERROR,\n  CLEAR_ERRORS,\n  LOADING_USER,\n  SET_USER,\n  SET_ERROR,\n  SET_UNAUTHENTICATED,\n  SET_ERRORS_SIGNUP_SELLER,\n} from \"../types\";\n\nimport axios from \"axios\";\n\nexport const signupUser = (newUserData, history) => (dispatch) => {\n  dispatch({ type: LOADING_UI });\n  axios\n    .post(\"/auth/signup-user\", newUserData)\n    .then((res) => {\n      dispatch({\n        type: SIGNUP_SUCCESS,\n      });\n      dispatch({ type: CLEAR_ERRORS });\n      history.push(\"/login\");\n    })\n    .catch((err) => {\n      console.log(err.response.data);\n      if (err.response) {\n        dispatch({\n          type: SET_ERRORS,\n          payload: err.response.data,\n        });\n      } else {\n        dispatch({\n          type: SERVER_ERROR,\n        });\n      }\n    });\n};\n\nexport const loginAction = (userData, history) => (dispatch) => {\n  dispatch({ type: LOADING_UI });\n  axios\n    .post(\"/auth/login\", userData)\n    .then((res) => {\n      const jwt = `Bearer ${res.data.token}`;\n      localStorage.setItem(\"jwt\", jwt);\n      axios.defaults.headers.common[\"Authorization\"] = jwt;\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n      console.log(\"Authenticated, check localStorage\", jwt);\n      history.push(\"/\");\n    })\n    .catch((err) => {\n      if (err.response) {\n        dispatch({\n          type: SET_ERROR,\n          payload: err.response.data,\n        });\n      } else {\n        dispatch({\n          type: SERVER_ERROR,\n        });\n      }\n    });\n};\n\nexport const getUserData = () => (dispatch) => {\n  dispatch({ type: LOADING_USER });\n  axios\n    .get(\"/user\")\n    .then((res) => {\n      // console.log(res);\n      dispatch({\n        type: SET_USER,\n        payload: res.data.result,\n      });\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const signupSeller =  (newSellerData, history) => async (dispatch) => {\n  console.log(newSellerData.get(\"aptName\"));\n  const location = `+${newSellerData.get(\n    \"locality\"\n  )},+${newSellerData.get(\"street\")},+${newSellerData.get(\"zip\")}`;\n  console.log(location);\n  try {\n    const result = await axios\n      .get(\"https://maps.googleapis.com/maps/api/geocode/json\", {\n        params: {\n          address: location,\n          key: \"AIzaSyAgIw9Puh-bUndTStw9wOUkEZvQHPbfQi8\",\n        },\n      });\n\n      console.log(\"Hello Result :\" + result.data.results)\n      if (\n        Array.isArray(result.data.results) &&\n        result.data.results.length > 0\n      ) {\n        // console.log(\"Formattted Address : \" + result.data.results[0])\n        const formattedAddress = result.data.results[0].formatted_address;\n        const lat = result.data.results[0].geometry.location.lat;\n        const lng = result.data.results[0].geometry.location.lng;\n        newSellerData.append(\"lat\", lat);\n        newSellerData.append(\"lng\", lng);\n        newSellerData.append(\"formattedAddress\", formattedAddress);\n      }\n\n      dispatch(signupSellerFinal(newSellerData, history));\n  }\n    catch(err) {\n      console.log(err);\n    }\n};\n\nexport const signupSellerFinal = (newSellerData, history) => (dispatch) => {\n  dispatch({ type: LOADING_UI });\n  axios\n    .post(\"/auth/signup-seller\", newSellerData)\n    .then((res) => {\n      dispatch({\n        type: SIGNUP_SUCCESS,\n      });\n      dispatch({ type: CLEAR_ERRORS });\n      history.push(\"/login\");\n    })\n    .catch((err) => {\n      if (err.response) {\n        dispatch({\n          type: SET_ERRORS_SIGNUP_SELLER,\n          payload: err.response.data,\n        });\n      } else {\n        dispatch({\n          type: SERVER_ERROR,\n        });\n      }\n    });\n};\n\nexport const logoutAction = (history) => (dispatch) => {\n  localStorage.removeItem(\"jwt\");\n  delete axios.defaults.headers.common[\"Authorization\"];\n  dispatch({ type: SET_UNAUTHENTICATED });\n  if (history) history.push(\"/login\");\n};\n"]},"metadata":{},"sourceType":"module"}